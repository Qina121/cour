<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <meta charset="UTF-8">
    <style>
      #drag1 {
        width: 100px;
        height: 100px;
        background: red;
        position: absolute;
        left: 0;
        top: 0;
      }
       #drag2 {
        width: 100px;
        height: 100px;
        background: red;
        position: absolute;
        left: 0;
        top: 200px;;
      }
      #miaov {
        width: 100px;
        height: 100px;
        background: blue;
      }
    </style>
  </head>
  <body>
    <div id="miaov">
      
    </div>
    <div id="drag1"></div>
    <div id="drag2"></div>
    <script>

      // 订阅发布模式
      /*
        订阅者
        发布者
        事件
      */

      // 三个人 小王 小李 小红
      // 售楼中心，问有没有房子

      // 三个人把电话号码留给前台

      let salesCenter = {
        phonebook: [],  // 记录电话号码
        subscribe (fn) {
          // 这个方法是用留电话号码，相当于前台

          this.phonebook.push(fn)
        },
        publish () {
          // 用来发布，相当于挨个打电话通知
          for( var i = 0; i < this.phonebook.length; i++ ){
            this.phonebook[i]()
          }
        }
      }
      // 小王
      salesCenter.subscribe(function (){
          console.log('小王接收通知');
          console.log('小王去问亲戚借钱了');
      })
      // 小李 
      salesCenter.subscribe(function (){
          console.log('小李接收通知');
          console.log('小李立马购买');
      })
      // 小红
      salesCenter.subscribe(function (){
          console.log('小红接收通知');
          console.log('小红请示一下');
      })

      

      document.onclick = function (){
          salesCenter.publish();
      }

    </script>
  </body>
</html>